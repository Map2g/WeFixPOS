{"filter":false,"title":"IndividualRepList.php","tooltip":"/queries/IndividualRepList.php","undoManager":{"mark":17,"position":17,"stack":[[{"start":{"row":0,"column":0},"end":{"row":56,"column":2},"action":"insert","lines":["<?php","","include 'config.php';","","$AllEmployee = \"SELECT * FROM EMPLOYEE ORDER BY EMP_LNAME ASC\";","$AllEmpResult = mysqli_query($conn, $AllEmployee);","","//Error message if query doesn't work","if ($AllEmpResult == false ) {","  printf(\"Connection error: %s\\nQuery error: %s\\n\", mysqli_error($conn), $AllEmployee);","}","","","//For search query","if ($_SERVER['REQUEST_METHOD'] == 'POST'){","    $search = $_POST['empSearch'];","    ","    $eSearch = \"SELECT * FROM EMPLOYEE WHERE (EMP_FNAME LIKE '%\" . $search . \"%') OR (EMP_LNAME LIKE '%\" . $search . \"%')\";","    $eSResult = mysqli_query($conn, $eSearch);","","    if ($eSResult == false ) {","        printf(\"Query error: %s\\n\", mysqli_error($conn));","    }","","    $thisQuery = $eSResult;","} else {","    $thisQuery = $AllEmpResult;","}","","","","$Count = 1;","","if (mysqli_num_rows($thisQuery) > 0) {","    $row = mysqli_fetch_assoc($thisQuery);","    while($row) {","        echo '  <tr>","                  <th scope=\"row\">' . $Count . '</th>","                  <td>' . $row[\"EMP_FNAME\"] . '</td>","                  <td>' . $row[\"EMP_LNAME\"] . '</td>","                  <td>' . $row[\"EMP_EMAIL\"] . '</td>","                  <td>' . $row[\"EMP_PHONE\"] . '</td>","                  <td>        ","                      <a href=\"EditEmp.php?id=' . $row[\"EMP_ID\"] . '\" style=\"text-decoration:none\">","                          <span class=\"glyphicon\">&#x270f;</span>","                      </a>","                  </td>","                </tr>';","        $Count = $Count + 1;","        $row = mysqli_fetch_assoc($thisQuery);","    }","} else {","    echo \"<tr> No employees to display.</tr>\";","}","mysqli_close($conn);","","?>"],"id":1}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":63},"action":"remove","lines":["$AllEmployee = \"SELECT * FROM EMPLOYEE ORDER BY EMP_LNAME ASC\";"],"id":2},{"start":{"row":4,"column":0},"end":{"row":18,"column":31},"action":"insert","lines":["$repairSql = \"SELECT ","                DEV_MODEL, ","                DEV_PHONE, ","                EMP_ID, ","                REP_DATE, ","                REP_LOCKRNO, ","                REP_DESC, ","                PROD_ID, ","                PROD_PRICE, ","                PROD_QUANTITY ","            FROM CUSTOMER JOIN DEVICE ON CUSTOMER.CUS_ID = DEVICE.CUS_ID ","                JOIN REPAIR ON DEVICE.DEV_ID = REPAIR.DEV_ID ","                JOIN REPAIR_INVOICE ON REPAIR.REP_ID = REPAIR_INVOICE.REP_ID ","            WHERE CUSTOMER.CUS_ID = '$customerID'","            ORDER BY REP_DATE\";"]}],[{"start":{"row":18,"column":31},"end":{"row":19,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":19,"column":0},"end":{"row":19,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":20,"column":0},"end":{"row":20,"column":50},"action":"remove","lines":["$AllEmpResult = mysqli_query($conn, $AllEmployee);"],"id":4},{"start":{"row":20,"column":0},"end":{"row":20,"column":49},"action":"insert","lines":["$repairDetails = mysqli_query($conn, $repairSql);"]}],[{"start":{"row":23,"column":0},"end":{"row":25,"column":1},"action":"remove","lines":["if ($AllEmpResult == false ) {","  printf(\"Connection error: %s\\nQuery error: %s\\n\", mysqli_error($conn), $AllEmployee);","}"],"id":5},{"start":{"row":23,"column":0},"end":{"row":24,"column":85},"action":"insert","lines":["if ($repairDetails == false ) {","  printf(\"Connection error: %s\\nQuery error: %s\\n\", mysqli_error($conn), $repairSql);"]}],[{"start":{"row":24,"column":85},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":25,"column":1},"end":{"row":25,"column":2},"action":"remove","lines":[" "],"id":7},{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"insert","lines":["}"],"id":8}],[{"start":{"row":25,"column":1},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":27,"column":0},"end":{"row":27,"column":93},"action":"insert","lines":["$RepTotPrice = 0.00; //placeholder for now. Need to calcualate from prod price, prod quantity"],"id":10}],[{"start":{"row":29,"column":0},"end":{"row":46,"column":0},"action":"remove","lines":["","//For search query","if ($_SERVER['REQUEST_METHOD'] == 'POST'){","    $search = $_POST['empSearch'];","    ","    $eSearch = \"SELECT * FROM EMPLOYEE WHERE (EMP_FNAME LIKE '%\" . $search . \"%') OR (EMP_LNAME LIKE '%\" . $search . \"%')\";","    $eSResult = mysqli_query($conn, $eSearch);","","    if ($eSResult == false ) {","        printf(\"Query error: %s\\n\", mysqli_error($conn));","    }","","    $thisQuery = $eSResult;","} else {","    $thisQuery = $AllEmpResult;","}","",""],"id":11},{"start":{"row":28,"column":0},"end":{"row":29,"column":0},"action":"remove","lines":["",""]},{"start":{"row":27,"column":93},"end":{"row":28,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":29,"column":0},"end":{"row":51,"column":1},"action":"remove","lines":["$Count = 1;","","if (mysqli_num_rows($thisQuery) > 0) {","    $row = mysqli_fetch_assoc($thisQuery);","    while($row) {","        echo '  <tr>","                  <th scope=\"row\">' . $Count . '</th>","                  <td>' . $row[\"EMP_FNAME\"] . '</td>","                  <td>' . $row[\"EMP_LNAME\"] . '</td>","                  <td>' . $row[\"EMP_EMAIL\"] . '</td>","                  <td>' . $row[\"EMP_PHONE\"] . '</td>","                  <td>        ","                      <a href=\"EditEmp.php?id=' . $row[\"EMP_ID\"] . '\" style=\"text-decoration:none\">","                          <span class=\"glyphicon\">&#x270f;</span>","                      </a>","                  </td>","                </tr>';","        $Count = $Count + 1;","        $row = mysqli_fetch_assoc($thisQuery);","    }","} else {","    echo \"<tr> No employees to display.</tr>\";","}"],"id":12},{"start":{"row":29,"column":0},"end":{"row":64,"column":1},"action":"insert","lines":["//Displaying repair query results","$CountR = 1;","","if (mysqli_num_rows($repairDetails) > 0) {","    $rowR = mysqli_fetch_assoc($repairDetails);","    while($rowR) {","        echo '","                    <tr>","                      <th scope=\"row\">' . $CountR . '</th>","                      <td>' . $rowR[\"REP_DATE\"] . '</td>","                      <td>' . $rowR[\"DEV_MODEL\"] . '</td>","                      <td>' . $rowR[\"DEV_PHONE\"] . '</td>","                      <td>' . $rowR[\"EMP_FNAME\"] . ' ' . $rowR[\"EMP_LNAME\"] . '</td>","                      <td>' . $rowR[\"REP_LOCKRNO\"] . '</td>","                      <td>' . $rowR[\"REP_DESC\"] . '</td>","                      <td>' . $RepTotPrice . '</td>","                      <td>        ","                          <a href=\"EditEmp.php?id=' . $rowR[\"REP_ID\"] . '\" style=\"text-decoration:none\">","                              <span class=\"glyphicon\">&#x270f; do not click</span>","                          </a>","                      </td>","                    </tr>","                </tbody>","               </table>","             </div>';","        $CountR = $CountR + 1;","        $rowR = mysqli_fetch_assoc($repairDetails);","    }","} else {","    echo '","                <tbody>","                    <tr> No existing repairs to display.</tr>","                </tbody>","            </table>","        </div>';","}"]}],[{"start":{"row":64,"column":1},"end":{"row":65,"column":0},"action":"insert","lines":["",""],"id":13}],[{"start":{"row":51,"column":12},"end":{"row":53,"column":19},"action":"remove","lines":["    </tbody>","               </table>","             </div>"],"id":19},{"start":{"row":51,"column":8},"end":{"row":51,"column":12},"action":"remove","lines":["    "]},{"start":{"row":51,"column":4},"end":{"row":51,"column":8},"action":"remove","lines":["    "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":4},"action":"remove","lines":["    "]},{"start":{"row":50,"column":25},"end":{"row":51,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":58,"column":1},"end":{"row":60,"column":14},"action":"remove","lines":["               </tbody>","            </table>","        </div>"],"id":20},{"start":{"row":58,"column":0},"end":{"row":58,"column":1},"action":"remove","lines":[" "]},{"start":{"row":57,"column":61},"end":{"row":58,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":56,"column":0},"end":{"row":56,"column":23},"action":"remove","lines":["                <tbody>"],"id":21},{"start":{"row":55,"column":10},"end":{"row":56,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":55,"column":10},"end":{"row":56,"column":0},"action":"remove","lines":["",""],"id":22},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]}],[{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "],"id":23},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]},{"start":{"row":55,"column":10},"end":{"row":55,"column":11},"action":"remove","lines":[" "]}]]},"ace":{"folds":[],"scrolltop":224,"scrollleft":0,"selection":{"start":{"row":38,"column":47},"end":{"row":38,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":15,"state":"php-qqstring","mode":"ace/mode/php"}},"timestamp":1554310920200,"hash":"db0005a7b8955d12e4162bdcfc58cc7ad3195093"}